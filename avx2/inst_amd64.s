#include "textflag.h"

#define FPTOX1X2 \
	MOVQ a+0(FP), SI;\
	MOVQ b+24(FP), DI;\
	MOVOU (SI), X1;\
	MOVOU (DI), X2;\

#define RETX1X2 \
	MOVOU X1, (SI);\
	MOVOU X2, (DI);\
	RET;\

#define FPTOY1Y2 \
	MOVQ a+0(FP), SI;\
	MOVQ b+24(FP), DI;\
	MOVOU (SI), Y1;\
	MOVOU (DI), Y2;\

#define FPTOX1X2X3 \
	MOVQ a+0(FP), SI;\
	MOVQ b+24(FP), DI;\
	MOVOU (SI), X1;\
	MOVOU (DI), X2;\
	MOVQ c+48(FP), DI;\
	MOVOU (DI), X3;\

#define RETY1Y2 \
	MOVOU Y1, (SI);\
	MOVOU Y2, (DI);\
	RET;\



TEXT ·VBROADCASTSSbyte(SB),NOSPLIT,$0-48
	FPTOX1X2
	VBROADCASTSS X2, X1
	RETX1X2
	


TEXT ·VPABSBm256byte(SB),NOSPLIT,$0-48
	
	FPTOY1Y2
	VPABSB Y2, Y1
	MOVOU Y1, (SI)
	RET
	


TEXT ·VPABSDm256byte(SB),NOSPLIT,$0-48
	
	FPTOY1Y2
	VPABSD Y2, Y1
	MOVOU Y1, (SI)
	RET
	


TEXT ·VPABSWm256byte(SB),NOSPLIT,$0-48
	
	FPTOY1Y2
	VPABSW Y2, Y1
	MOVOU Y1, (SI)
	RET
	


TEXT ·VPBROADCASTBm8byte(SB),NOSPLIT,$0-48
	FPTOX1X2
	VPBROADCASTB X2, X1
	RETX1X2
	


TEXT ·VPBROADCASTDm32byte(SB),NOSPLIT,$0-48
	FPTOX1X2
	VPBROADCASTD X2, X1
	RETX1X2
	


TEXT ·VPBROADCASTQm64byte(SB),NOSPLIT,$0-48
	FPTOX1X2
	VPBROADCASTQ X2, X1
	RETX1X2
	


TEXT ·VPBROADCASTWm16byte(SB),NOSPLIT,$0-48
	FPTOX1X2
	VPBROADCASTW X2, X1
	RETX1X2
	


TEXT ·VPSLLVDm128byte(SB),NOSPLIT,$0-72
	
	FPTOX1X2X3
	VPSLLVD X3, X2, X1
	MOVOU X1, (SI)
	MOVOU X2, (DI)
	RET
	


TEXT ·VPSLLVQm128byte(SB),NOSPLIT,$0-72
	
	FPTOX1X2X3
	VPSLLVQ X3, X2, X1
	MOVOU X1, (SI)
	MOVOU X2, (DI)
	RET
	


TEXT ·VPSRAVDm128byte(SB),NOSPLIT,$0-72
	
	FPTOX1X2X3
	VPSRAVD X3, X2, X1
	MOVOU X1, (SI)
	MOVOU X2, (DI)
	RET
	


TEXT ·VPSRLVDm128byte(SB),NOSPLIT,$0-72
	
	FPTOX1X2X3
	VPSRLVD X3, X2, X1
	MOVOU X1, (SI)
	MOVOU X2, (DI)
	RET
	


TEXT ·VPSRLVQm128byte(SB),NOSPLIT,$0-72
	
	FPTOX1X2X3
	VPSRLVQ X3, X2, X1
	MOVOU X1, (SI)
	MOVOU X2, (DI)
	RET
	


